window.__require=function t(e,o,n){function i(r,c){if(!o[r]){if(!e[r]){var l=r.split("/");if(l=l[l.length-1],!e[l]){var s="function"==typeof __require&&__require;if(!c&&s)return s(l,!0);if(a)return a(l,!0);throw new Error("Cannot find module '"+r+"'")}r=l}var d=o[r]={exports:{}};e[r][0].call(d.exports,function(t){return i(e[r][1][t]||t)},d,d.exports,t,e,o,n)}return o[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({BeepSound:[function(t,e,o){"use strict";cc._RF.push(e,"6e2212jlgxA/7BidT+exFCe","BeepSound");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioClips=[],e.audioSource=null,e}return i(e,t),e.prototype.onLoad=function(){this.audioSource=this.getComponent(cc.AudioSource)},e.prototype.playBeepSnd=function(){this.audioSource.clip=this.audioClips[0],this.audioSource.play()},e.prototype.playGameStartSnd=function(){this.audioSource.clip=this.audioClips[1],this.audioSource.play()},a([l([cc.AudioClip])],e.prototype,"audioClips",void 0),a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],BtnSound:[function(t,e,o){"use strict";cc._RF.push(e,"ea50cI66VtK+r+jhfRb/NhM","BtnSound");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioClips=[],e.audioSource=null,e}return i(e,t),e.prototype.onLoad=function(){this.audioSource=this.getComponent(cc.AudioSource)},e.prototype.playBtnSnd=function(){this.audioSource.clip=this.audioClips[0],this.audioSource.play()},a([l([cc.AudioClip])],e.prototype,"audioClips",void 0),a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],Bullet:[function(t,e,o){"use strict";cc._RF.push(e,"1ddbdAhFvxJxbGVcqNLScG/","Bullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../SoundScript/HitSound"),c=cc._decorator,l=c.ccclass,s=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=500,e.damage=10,e.ownerID=-1,e.fireParticlePrefab=null,e}return i(e,t),e.prototype.onLoad=function(){var t=this;cc.director.getCollisionManager().enabled=!0,this.scheduleOnce(function(){t.node.destroy(),console.log("\uc2dc\uac04\uc774 \uc9c0\ub098 \ucd1d\uc54c \uc0ad\uc81c")},4),console.log("\ucd1d\uc54c \uc0dd\uc131")},e.prototype.update=function(t){this.node.setPosition(this.node.position.add(cc.v3(this.direction.x,this.direction.y,0).mul(this.speed*t)))},e.prototype.setDirection=function(t){this.direction=t},e.prototype.setOwner=function(t){this.ownerID=t},e.prototype.getOwner=function(){return this.ownerID},e.prototype.onCollisionEnter=function(t){if("Wall"===t.node.group){console.log("\ubcbd\uc5d0 \ub9de\uc544\uc11c \ucd1d\uc54c \uc0ad\uc81c"),cc.find("Canvas/BulletHitSound").getComponent(r.default).playHitSnd();var e=cc.instantiate(this.fireParticlePrefab);cc.find("Canvas/Game").addChild(e),e.setPosition(this.node.position),this.node.destroy()}"Player"===t.node.group&&parseInt(this.extractNumbersFromString(t.node.name))!==this.getOwner()&&(e=cc.instantiate(this.fireParticlePrefab),cc.find("Canvas/Game").addChild(e),e.setPosition(this.node.position))},e.prototype.extractNumbersFromString=function(t){return t.replace(/\D/g,"")},a([s],e.prototype,"speed",void 0),a([s(cc.Prefab)],e.prototype,"fireParticlePrefab",void 0),a([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../SoundScript/HitSound":"HitSound"}],DieSound:[function(t,e,o){"use strict";cc._RF.push(e,"64871AtF/dJyLseTU9bQF3E","DieSound");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioClips=[],e.audioSource=null,e}return i(e,t),e.prototype.onLoad=function(){this.audioSource=this.getComponent(cc.AudioSource)},e.prototype.playDieSnd=function(){this.audioSource.clip=this.audioClips[0],this.audioSource.play()},a([l([cc.AudioClip])],e.prototype,"audioClips",void 0),a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],ErrorLogScript:[function(t,e,o){"use strict";cc._RF.push(e,"4798c0imy9I1IrJlQqP4mdX","ErrorLogScript");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){var t=this;this.scheduleOnce(function(){t.node.destroy()},3)},a([c],e)}(cc.Component));o.default=l,cc._RF.pop()},{}],GameEvent:[function(t,e,o){"use strict";cc._RF.push(e,"0ec5bD7DJhB76O8X06FPEgP","GameEvent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../SoundScript/TrapSound"),c=cc._decorator,l=c.ccclass,s=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.warningNodes=null,e.slowObstacle=null,e.moveSpeed=100,e.timer=0,e}return i(e,t),e.prototype.onLoad=function(){console.log("\uc7a5\uc560\ubb3c \uc18c\ud658\ub428"),this.createOpacityTween2(this.warningNodes,.3)},e.prototype.update=function(t){this.timer+=t,this.timer>4?(this.moveTrap(t),this.node.getChildByName("TrapSound").getComponent(cc.AudioSource).isPlaying||this.node.getChildByName("TrapSound").getComponent(r.default).playSlowAttackSnd()):this.timer<1.2&&(this.node.getChildByName("TrapSound").getComponent(cc.AudioSource).isPlaying||this.node.getChildByName("TrapSound").getComponent(r.default).playTrapSnd()),this.destroyTrap()},e.prototype.moveTrap=function(t){if("TrapEvent"===this.node.name){var e=this.slowObstacle.position.x+this.moveSpeed*t;this.slowObstacle.setPosition(e,this.slowObstacle.position.y)}else"TrapEvent2"===this.node.name&&(e=this.slowObstacle.position.x-this.moveSpeed*t,this.slowObstacle.setPosition(e,this.slowObstacle.position.y))},e.prototype.destroyTrap=function(){"TrapEvent"===this.node.name&&this.slowObstacle.position.x>2250?this.node.destroy():"TrapEvent2"===this.node.name&&this.slowObstacle.position.x<-140&&this.node.destroy()},e.prototype.createOpacityTween2=function(t,e){t.opacity=0,cc.tween(t).to(e,{opacity:255}).to(e,{opacity:100}).to(e,{opacity:255}).to(e,{opacity:100}).to(e,{opacity:255}).to(e,{opacity:100}).to(e,{opacity:255}).to(e,{opacity:0}).start()},e.prototype.onDisable=function(){},a([s(cc.Node)],e.prototype,"warningNodes",void 0),a([s(cc.Node)],e.prototype,"slowObstacle",void 0),a([s],e.prototype,"moveSpeed",void 0),a([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../SoundScript/TrapSound":"TrapSound"}],HitSound:[function(t,e,o){"use strict";cc._RF.push(e,"99f7cxf/H5Me55HaDQdnSUX","HitSound");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioClips=[],e.audioSource=null,e}return i(e,t),e.prototype.onLoad=function(){this.audioSource=this.getComponent(cc.AudioSource)},e.prototype.playHitSnd=function(){this.audioSource.clip=this.audioClips[0],this.audioSource.play()},a([l([cc.AudioClip])],e.prototype,"audioClips",void 0),a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],IntroPlayer:[function(t,e,o){"use strict";cc._RF.push(e,"bc9b1XFDyJCu7uZNL9p7/Am","IntroPlayer");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveSpeed=30,e.animName="null",e.anim=null,e}return i(e,t),e.prototype.onLoad=function(){this.anim.play(this.animName)},e.prototype.update=function(t){var e=this.node.getPosition();e.x>1200?(this.anim.getAnimationState("Char1Roll").isPlaying||(this.node.scaleX=-1,this.anim.play("Char1Roll")),e.y=Math.floor(801*Math.random())-400,this.moveSpeed=550,this.moveSpeed>0&&(this.moveSpeed=-1*this.moveSpeed)):e.x<-1200&&(this.anim.getAnimationState("Char1Walk").isPlaying||(this.node.scaleX=1,this.anim.play("Char1Walk")),e.y=Math.floor(801*Math.random())-400,this.moveSpeed=300,this.moveSpeed>0||(this.moveSpeed=-1*this.moveSpeed));var o=e.add(cc.v2(this.moveSpeed*t,0));this.node.setPosition(o)},a([l],e.prototype,"moveSpeed",void 0),a([l],e.prototype,"animName",void 0),a([l(cc.Animation)],e.prototype,"anim",void 0),a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],IntroSound:[function(t,e,o){"use strict";cc._RF.push(e,"638f7mJkXBNX5cyo5Y851IO","IntroSound");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audio=null,e}return i(e,t),e.prototype.onEnable=function(){this.audio.play()},e.prototype.onDisable=function(){this.audio.stop()},a([l(cc.AudioSource)],e.prototype,"audio",void 0),a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],IntroUi:[function(t,e,o){"use strict";cc._RF.push(e,"ab661QnjX5MALKBlyMCH91W","IntroUi");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){this.bigSmall()},e.prototype.bigSmall=function(){var t=cc.scaleTo(1,1.3,1.3),e=cc.scaleTo(1,1,1);cc.tween(this.node).repeatForever(cc.tween().then(t).then(e)).start()},a([c],e)}(cc.Component));o.default=l,cc._RF.pop()},{}],NoStaminaSound:[function(t,e,o){"use strict";cc._RF.push(e,"ac07a4fk09PFZcSboXqUgNW","NoStaminaSound");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioClips=[],e.audioSource=null,e}return i(e,t),e.prototype.onLoad=function(){this.audioSource=this.getComponent(cc.AudioSource)},e.prototype.playNoStaminaSnd=function(){this.audioSource.clip=this.audioClips[0],this.audioSource.volume=.4,this.audioSource.play()},e.prototype.playYesStaminaSnd=function(){this.audioSource.clip=this.audioClips[1],this.audioSource.volume=.2,this.audioSource.play()},a([l([cc.AudioClip])],e.prototype,"audioClips",void 0),a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],ObstacleCollider:[function(t,e,o){"use strict";cc._RF.push(e,"5cebfC/I11PdaVwdc7q+G4N","ObstacleCollider");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.up=null,e.down=null,e.left=null,e.right=null,e}return i(e,t),e.prototype.onLoad=function(){this.initUp(),this.initDown(),this.initLeft(),this.initRight()},e.prototype.initUp=function(){var t=this.node.getContentSize();this.up.node.setPosition(cc.v2(0,t.height/2)),this.up.size.width=t.width,this.up.size.height=5},e.prototype.initDown=function(){var t=this.node.getContentSize();this.down.node.setPosition(cc.v2(0,-t.height/2)),this.down.size.width=t.width,this.down.size.height=5},e.prototype.initLeft=function(){var t=this.node.getContentSize();this.left.node.setPosition(cc.v2(-t.width/2,0)),this.left.size.width=5,this.left.size.height=t.height},e.prototype.initRight=function(){var t=this.node.getContentSize();this.right.node.setPosition(cc.v2(t.width/2,0)),this.right.size.width=5,this.right.size.height=t.height},a([l(cc.BoxCollider)],e.prototype,"up",void 0),a([l(cc.BoxCollider)],e.prototype,"down",void 0),a([l(cc.BoxCollider)],e.prototype,"left",void 0),a([l(cc.BoxCollider)],e.prototype,"right",void 0),a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],OnLoadSound:[function(t,e,o){"use strict";cc._RF.push(e,"26effYYz8BGpoLDVaCLAal9","OnLoadSound");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../PhotonManager"),c=cc._decorator,l=c.ccclass,s=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audio=null,e}return i(e,t),e.prototype.onEnable=function(){this.node.name==="Player_"+r.default.instance.MyActNum()&&(this.audio.play(),console.log("\ub4f1\uc7a5"))},e.prototype.onDisable=function(){this.node.name==="Player_"+r.default.instance.MyActNum()&&this.audio.stop()},a([s(cc.AudioSource)],e.prototype,"audio",void 0),a([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../PhotonManager":"PhotonManager"}],PhotonManager:[function(t,e,o){"use strict";cc._RF.push(e,"eccc7GEJTlNDYBD8sk9QlUt","PhotonManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Player/Bullet"),c=t("./Player/Player"),l=t("./Player/Player"),s=t("./Player/PlayerFire"),d=t("./Player/PlayerMovement"),p=t("./SoundScript/BeepSound"),h=t("./SoundScript/DieSound"),u=t("./SoundScript/HitSound"),y=t("./SoundScript/RespawnSound"),f=t("./SoundScript/ShotSound"),m=cc._decorator,g=m.ccclass,N=m.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maximumPlayer=0,e.playerPrefab1=null,e.playerPrefab2=null,e.bulletPrefab=null,e.joinButton=null,e.createBtn=null,e.roomName=null,e.nickName=null,e.roomCodeInGame=null,e.startBtn=null,e.backToLobbyBtn=null,e.killLogPrefab=null,e.kdaLabelPrefab=null,e.spawnPoint=[],e.introTitle=null,e.playerNicknames=new Map,e.playerNodes=new Map,e.isStarted=!1,e.timerLabel=null,e.timerEditBox=null,e.totalTime=30,e.currentTime=0,e.spawnPoints=[0,1,2,3,4,5,6,7,8,9],e.enterNode=null,e.trapPrefab1=null,e.trapPrefab2=null,e.errorLogContainer=null,e.errorLogPrefab=null,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){o.instance||(o.instance=this),this.initializePhoton(),this.backToLobbyBtn.on("click",this.onBackToLobbyBtnClick,this),this.createBtn.on("click",this.onCreateBtnClick,this),this.joinButton.on("click",this.onJoinButtonClick,this),this.createBtn.active=!1,this.joinButton.active=!1,this.roomName.node.on("text-changed",this.onTextChanged,this),this.roomName.node.on("editing-did-ended",this.onEditEnded,this),this.nickName.node.on("text-changed",this.onTextChanged,this),this.nickName.node.on("editing-did-ended",this.onEditEnded,this),this.timerEditBox.node.on("text-changed",this.onTextChanged,this),this.timerEditBox.node.on("editing-did-ended",this.onEditEnded,this)},e.prototype.initializePhoton=function(){this.client=new Photon.LoadBalancing.LoadBalancingClient(Photon.ConnectionProtocol.Wss,"ce01ff48-0bf9-42a7-a447-b3f3c44323d6","1.0"),this.client.connectToRegionMaster("kr"),this.client.onStateChange=this.onStateChange.bind(this),this.client.onJoinRoom=this.onJoinRoom.bind(this),this.client.onEvent=this.onEvent.bind(this),this.client.onJoinRoomError=this.onJoinRoomError.bind(this),this.client.onActorLeave=this.onActorLeave.bind(this),this.client.onActorJoin=this.onActorJoin.bind(this)},e.prototype.onActorLeave=function(t){console.log(t.actorNr+"\ub098\uac10"),1==t.actorNr&&(console.log("\ubc29\uc7a5\ub098\uac10"),this.endGame());var e=this.getPlayerNode(t.actorNr);e.active=!1,e.destroy(),this.getPlayerNode(this.myActorNr).getChildByName("PlayerCamera").getChildByName("KdaPanel").getChildByName("KdaContainer").getChildByName("kda_"+t.actorNr).destroy()},e.prototype.onActorJoin=function(){if(this.client.myRoom().masterClientId===this.myActorNr){var t=this.getPlayerNode(this.myActorNr);this.movePlayer(cc.v2(t.position.x,t.position.y));var e=t.getComponent(d.default).isHomeBtn;this.client.raiseEvent(140,{bool:e})}},e.prototype.endGame=function(){location.reload()},e.prototype.onTextChanged=function(t){var e=t.string;console.log("Text changed: "+e)},e.prototype.onEditEnded=function(t){var e=t.string;console.log("Editing ended: "+e)},e.prototype.onCreateBtnClick=function(){var t=this;if(console.log("create button clicked"),this.client.availableRooms().find(function(e){return e.name===t.roomName.string}))this.makeErrorLog("\ub3d9\uc77c\ud55c \uc774\ub984\uc758 \ubc29\uc774 \uc774\ubbf8 \uc874\uc7ac\ud569\ub2c8\ub2e4.");else if(this.totalTime=parseInt(this.timerEditBox.string),this.totalTime=parseInt(this.timerEditBox.string),""!==this.timerEditBox.string.trim())if(isNaN(this.totalTime))this.makeErrorLog("\ud0c0\uc774\uba38 \uc785\ub825\uac12\uc774 \uc22b\uc790\uac00 \uc544\ub2d9\ub2c8\ub2e4.");else{var e=Math.floor(1e3+9e3*Math.random());this.roomName.string=e.toString(),this.roomCodeInGame.string="Code : "+e.toString(),this.createBtn.active=!1,this.introTitle.active=!1,this.joinButton.active=!1,this.roomName.node.active=!1,this.nickName.node.active=!1,this.startBtn.active=!1,this.enterNode.active=!1,this.createRoom(this.roomName.string)}else this.makeErrorLog("\ud0c0\uc774\uba38\ub97c \uc124\uc815\ud574\uc8fc\uc138\uc694.")},e.prototype.onJoinButtonClick=function(){var t=this;console.log("join button clicked");var e=this.client.availableRooms().find(function(e){return e.name===t.roomName.string});e?e&&!1===e.isOpen?this.makeErrorLog("\uac8c\uc784\uc774 \uc774\ubbf8 \uc2dc\uc791\ub41c \ubc29\uc785\ub2c8\ub2e4."):(this.roomCodeInGame.string="Code : "+this.roomName.string,this.createBtn.active=!1,this.introTitle.active=!1,this.joinButton.active=!1,this.roomName.node.active=!1,this.nickName.node.active=!1,this.startBtn.active=!1,this.enterNode.active=!1,this.client.joinRoom(this.roomName.string,null,null)):this.makeErrorLog("\ub3d9\uc77c\ud55c \uc774\ub984\uc758 \ubc29\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.")},e.prototype.onStateChange=function(t){t===Photon.LoadBalancing.LoadBalancingClient.State.JoinedLobby&&("teacher"===new URLSearchParams(window.location.search).get("user")?(this.createBtn.active=!0,this.createBtn.setPosition(this.joinButton.getPosition()),this.nickName.node.setPosition(this.roomName.node.getPosition()),this.joinButton.active=!1,this.roomName.node.active=!1):(this.createBtn.active=!1,this.joinButton.active=!0))},e.prototype.createRoom=function(t){var e={maxPlayers:this.maximumPlayer};this.client.createRoom(t,e)},e.prototype.onJoinRoom=function(){this.myActorNr=this.client.myActor().actorNr,console.log("Joined room with actor number: "+this.myActorNr),""===this.nickName.string.trim()&&(this.nickName.string="Player_"+this.myActorNr),this.createPlayerNode(this.myActorNr,this.nickName.string);var t=this.getPlayerNode(this.myActorNr);if(t){var e=t.position.add(cc.v3(.1,.1,0));t.setPosition(e),this.movePlayer(cc.v2(e.x,e.y))}this.client.myRoom().masterClientId===this.myActorNr&&(this.startBtn.setParent(t.getChildByName("PlayerCamera")),this.startBtn.setPosition(cc.v2(0,-400)),this.backToLobbyBtn.active=!1,this.backToLobbyBtn.setParent(t.getChildByName("PlayerCamera")),this.backToLobbyBtn.setPosition(cc.v2(800,-400)));var o=this.client.myRoomActors();for(var n in o)parseInt(n)!==this.myActorNr&&this.client.raiseEvent(2,{requestActorNr:this.myActorNr});this.playerNicknames.set(this.myActorNr,this.nickName.string),this.client.raiseEvent(100,{actorNr:this.myActorNr,nickname:this.nickName.string}),this.client.myRoom().masterClientId===this.myActorNr&&(this.startBtn.active=!0),1==this.isStarted&&(this.client.myRoom().setIsOpen(!1),console.log("Room is now locked from new players")),cc.find("Canvas/Main Camera").active=!1,t.getComponent(c.default).currentState=l.PlayerState.MoveOnly,t.setSiblingIndex(t.parent.childrenCount-1)},e.prototype.removeDuplicateChildren=function(t){var e=t.children,o=new Map;e.forEach(function(t){var e=t.name;if(o.has(e)){var n=o.get(e);n&&(n.destroy(),console.log("Removed duplicate child: "+e))}o.set(e,t)})},e.prototype.isSamePosition=function(t,e,o){void 0===o&&(o=10);var n=t.convertToWorldSpaceAR(cc.Vec2.ZERO),i=e.convertToWorldSpaceAR(cc.Vec2.ZERO);return Math.abs(n.x-i.x)<o&&Math.abs(n.y-i.y)<o},e.prototype.updatePlayerScaleX=function(t){this.client.raiseEvent(102,{scaleX:t,actorNr:this.myActorNr})},e.prototype.onJoinRoomError=function(t,e){console.error("Join Room Error - Code: "+t+", Message: "+e)},e.prototype.createPlayerNode=function(t,e){var o=this.getPlayerNode(t);if(!o){switch((o=cc.instantiate(this.playerPrefab1)).name="Player_"+t,o.setPosition(cc.v2(0,0)),o.getChildByName("NickName").getComponent(cc.Label).string=e,t%6+1){case 1:o.getChildByName("Circle").color=cc.Color.BLUE,o.getChildByName("NickName").color=cc.Color.BLUE,o.getChildByName("PlayerPrefab").color=cc.Color.BLUE;break;case 2:o.getChildByName("Circle").color=cc.Color.RED,o.getChildByName("NickName").color=cc.Color.RED,o.getChildByName("PlayerPrefab").color=cc.Color.RED;break;case 3:o.getChildByName("Circle").color=cc.Color.YELLOW,o.getChildByName("NickName").color=cc.Color.YELLOW,o.getChildByName("PlayerPrefab").color=cc.Color.YELLOW;break;case 4:o.getChildByName("Circle").color=cc.Color.GREEN,o.getChildByName("NickName").color=cc.Color.GREEN,o.getChildByName("PlayerPrefab").color=cc.Color.GREEN;break;case 5:o.getChildByName("Circle").color=cc.Color.MAGENTA,o.getChildByName("NickName").color=cc.Color.MAGENTA,o.getChildByName("PlayerPrefab").color=cc.Color.MAGENTA;break;case 6:o.getChildByName("Circle").color=cc.Color.GRAY,o.getChildByName("NickName").color=cc.Color.GRAY,o.getChildByName("PlayerPrefab").color=cc.Color.GRAY;break;default:o.getChildByName("Circle").color=cc.Color.ORANGE,o.getChildByName("NickName").color=cc.Color.ORANGE,o.getChildByName("PlayerPrefab").color=cc.Color.ORANGE}cc.find("Canvas/Game").addChild(o),o.setSiblingIndex(this.node.parent.childrenCount-1),o.active=!0,this.playerNodes.set(t,o),this.playerNicknames.set(t,e)}return o},e.prototype.getPlayerNode=function(t){return this.playerNodes.get(t)},e.prototype.movePlayer=function(t){var e=this.getPlayerNode(this.myActorNr);e.setSiblingIndex(e.parent.childrenCount-1),e&&(e.setPosition(t),this.client.raiseEvent(1,{x:t.x,y:t.y}))},e.prototype.Btn_Start=function(){var t=this,e=this.getPlayerNode(this.myActorNr);e&&(e.active=!0,this.client.raiseEvent(3),this.client.raiseEvent(100,{actorNr:this.myActorNr,nickname:this.nickName.string})),cc.find("Canvas/Main Camera").active=!1;var o=Math.floor(10*Math.random());this.spawn(o),this.client.raiseEvent(113,{randNum:o}),this.isStarted=!0,e.getChildByName("PlayerCamera").getChildByName("PlayerUI").active=!0,this.roomCodeInGame.node.active=!1,e.setSiblingIndex(e.parent.childrenCount-1),this.gameStartCnt(e),this.scheduleOnce(function(){t.timerStart()},3)},e.prototype.onBackToLobbyBtnClick=function(){this.isStarted=!1,this.roomCodeInGame.node.active=!0,cc.director.resume();var t=this.getPlayerNode(this.myActorNr);if(t){t.setPosition(cc.v2(0,0)),this.movePlayer(cc.v2(0,0)),t.getComponent(c.default).currentState=l.PlayerState.MoveOnly,this.currentTime=this.totalTime,t.getComponent(s.default).setCurrentBullet(30),t.getChildByName("PlayerCamera").getChildByName("KdaPanel").active=!1,t.getChildByName("PlayerCamera").getChildByName("GameOver").active=!1,t.getChildByName("PlayerCamera").getChildByName("GameOverBg").active=!1,t.getChildByName("PlayerCamera").getChildByName("PlayerUI").active=!1,t.getComponent(d.default).setCurrentStamina(100),t.getComponent(c.default).setCurrentHealth(100),t.getComponent(c.default).isGameOver=!1,t.getComponent(c.default).resetKillDeath(),t.getComponent(c.default).updateKdaLabelLocal(),t.getComponent(c.default).updateKdaLabel();var e=this.client.myRoomActors();for(var o in e)if(parseInt(o)!==this.myActorNr){var n=this.getPlayerNode(parseInt(o));n.getComponent(c.default).resetKillDeath(),n.getComponent(c.default).updateKdaLabelLocal(),n.getComponent(c.default).updateKdaLabel()}this.client.myRoom().masterClientId===this.myActorNr&&(this.startBtn.active=!0,this.backToLobbyBtn.active=!1,this.client.raiseEvent(132))}},e.prototype.MyActNum=function(){return this.myActorNr},e.prototype.update=function(){1==this.startBtn.active&&this.client.myRoom().setIsOpen(!0),1==this.isStarted&&1==this.startBtn.active&&(this.startBtn.active=!1,this.client.myRoom().setIsOpen(!1));var t=this.getPlayerNode(this.myActorNr);t&&t.setSiblingIndex(t.parent.childrenCount-1)},e.prototype.shootBullet=function(){var t=this.getPlayerNode(this.myActorNr);if(t){var e=t.getChildByName("GunNode").getChildByName("weaponR1").getChildByName("BulletDir"),o=cc.instantiate(this.bulletPrefab),n=t.getChildByName("GunNode").getChildByName("weaponR1").getChildByName("BulletPos").convertToWorldSpaceAR(cc.v2(0,0)),i=e.convertToWorldSpaceAR(cc.v2(0,0)).sub(n).normalize(),a=cc.find("Canvas/Game");a.addChild(o),t.setSiblingIndex(t.parent.childrenCount-1);var c=a.convertToNodeSpaceAR(n);o.setPosition(c),o.getComponent(r.default).setDirection(i),o.getComponent(r.default).setOwner(this.myActorNr),this.client.raiseEvent(101,{position:n,direction:i,actorNr:this.myActorNr})}},e.prototype.spawnBullet=function(t,e,o){console.log(o+"\uc758 \ucd1d\uc54c \uc0dd\uc131");var n=cc.instantiate(this.bulletPrefab),i=cc.find("Canvas/Game");i.addChild(n);var a=this.getPlayerNode(o);a.setSiblingIndex(a.parent.childrenCount-1);var c=i.convertToNodeSpaceAR(t);n.setPosition(c),n.getComponent(r.default).setDirection(e),n.getComponent(r.default).setOwner(o)},e.prototype.isGameStart=function(){return this.isStarted},e.prototype.spawn=function(t){var e=this.getPlayerNode(this.myActorNr);e.setPosition(this.spawnPoint[t].position),e.setSiblingIndex(e.parent.childrenCount-1),this.movePlayer(cc.v2(this.spawnPoint[t].position.x,this.spawnPoint[t].position.y))},e.prototype.gameStartCnt=function(t){var e=this;t.getComponent(c.default).currentState=l.PlayerState.Idle,t.getChildByName("c3").active=!0,this.createOpacityTween(t.getChildByName("c3")),t.getChildByName("BeepSound").getComponent(p.default).playBeepSnd(),this.scheduleOnce(function(){t.getChildByName("c3").active=!1,t.getChildByName("c2").active=!0,t.getChildByName("BeepSound").getComponent(p.default).playBeepSnd(),e.createOpacityTween(t.getChildByName("c2"))},1),this.scheduleOnce(function(){t.getChildByName("c2").active=!1,t.getChildByName("c1").active=!0,t.getChildByName("BeepSound").getComponent(p.default).playBeepSnd(),e.createOpacityTween(t.getChildByName("c1"))},2),this.scheduleOnce(function(){t.getChildByName("c1").active=!1,t.getChildByName("BeepSound").getComponent(p.default).playGameStartSnd(),t.getComponent(c.default).currentState=l.PlayerState.MoveAndShoot},3)},e.prototype.timerStart=function(){this.currentTime=this.totalTime,this.updateTimerLabel(),this.client.raiseEvent(122,{actorNr:this.myActorNr,currentTime:this.currentTime}),this.schedule(this.updateTimer,1)},e.prototype.updateTimer=function(){if(this.currentTime>0){if(this.currentTime%10==0){console.log("\uc7a5\uc560\ubb3c \uc2e4\ud589");var t=Math.floor(2*Math.random()),e=Math.floor(2*Math.random()),o=Math.floor(1900*Math.random())-950;this.spawnTrap(t,e,o),this.client.raiseEvent(139,{randAB:t,randXY:e,randNum:o})}this.currentTime--,this.updateTimerLabel(),this.client.raiseEvent(122,{actorNr:this.myActorNr,currentTime:this.currentTime})}else this.unschedule(this.updateTimer),this.client.raiseEvent(123,{actorNr:this.myActorNr}),this.onTimerEnd()},e.prototype.updateTimerLabel=function(){var t=this.getPlayerNode(this.myActorNr);this.timerLabel=t.getChildByName("PlayerCamera").getChildByName("PlayerUI").getChildByName("Timer").getComponent(cc.Label),this.timerLabel.string=""+this.currentTime},e.prototype.onTimerEnd=function(){cc.log("\ud0c0\uc774\uba38\uac00 \uc885\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"),this.backToLobbyBtn.active=!0;var t=this.getPlayerNode(this.myActorNr);t.setSiblingIndex(t.parent.childrenCount-1),t.getChildByName("BeepSound").getComponent(p.default).playGameStartSnd(),t.getComponent(c.default).gameOver()},e.prototype.createOpacityTween=function(t){t.opacity=0,cc.tween(t).to(.5,{opacity:255}).to(.5,{opacity:0}).start()},e.prototype.createOpacityTween2=function(t,e){t.opacity=0,cc.tween(t).to(e,{opacity:255}).to(e,{opacity:100}).to(e,{opacity:255}).to(e,{opacity:100}).to(e,{opacity:255}).to(e,{opacity:100}).to(e,{opacity:255}).start()},e.prototype.takeDamageEffect=function(t,e,o){cc.tween(t).to(e,{color:new cc.Color(70,70,70)}).to(e,{color:o}).start()},e.prototype.makeErrorLog=function(t){var e=cc.instantiate(this.errorLogPrefab);this.errorLogContainer.addChild(e),e.setPosition(cc.v2(0,0)),e.getComponent(cc.Label).string=t,this.scheduleOnce(function(){e.destroy()},3)},e.prototype.onEvent=function(t,e,o){var n=this.getPlayerNode(o);switch(t){case 1:this.handlePositionUpdate(e,n,o);break;case 2:this.handleRequestPosition(e);break;case 3:n=this.getPlayerNode(this.myActorNr),this.handleGameStart(n);break;case 100:this.handleNicknameReceived(e);break;case 101:this.handleBulletSpawn(e);break;case 102:this.handleScaleChange(e);break;case 103:this.handleAnimation(e);break;case 104:this.handlePlayerDeath(e);break;case 105:this.handlePlayerSpawn(e);break;case 106:this.handleNicknameUpdate(e);break;case 107:this.handleDisableBoxCollider(e);break;case 108:this.handleEnableBoxCollider(e);break;case 109:this.handleGunAngleUpdate(e);break;case 110:this.handlePlayerHide(e);break;case 111:this.handlePlayerShow(e);break;case 112:this.handleKillLog(e);break;case 113:this.handleSpawnRequest(e);break;case 114:this.handleKdaContainerUpdate(e);break;case 115:this.handleKdaLabelUpdate(e);break;case 116:this.handleKdaSynchronization(e);break;case 117:this.handleKdaUpdate(e);break;case 118:this.handleDeathAnimation(e);break;case 119:this.handleActivateDummyNode(e);break;case 120:this.handleStopDeathAnimation(e);break;case 121:this.handleCreateDamageEffect(e);break;case 122:this.handleUpdateTimerLabel(e);break;case 123:this.handleGameOver();break;case 124:this.handleWeaponDeactivation(e.actorNr);break;case 125:this.handleWeaponActivation(e.actorNr);break;case 126:this.handleRespawnIfPositionOverlap(e.actorNr,e.position);break;case 127:this.handleInvincibility(e.actorNr,e.duration);break;case 128:this.handleMuzzleActivation(e.actorNr);break;case 129:this.handleMuzzleDeactivation(e.actorNr);break;case 130:this.handleShadowActivation(e.actorNr);break;case 131:this.handleShadowToggle(e.actorNr,!1);break;case 132:this.handleBackToLobby(this.myActorNr);break;case 133:this.playDieSound(e.actorNr);break;case 134:this.playHitSound(e.actorNr);break;case 135:this.playShotSound(e.actorNr);break;case 136:this.handleDamageEffect(e.actorNr);break;case 137:this.scaleWeapon(e.actorNr,e.scale);break;case 138:this.playRespawnSound(e.actorNr);break;case 139:console.log("\uc7a5\uc560\ubb3c \ub450\ub450\ub4f1\uc7a5"),this.spawnTrap(e.randAB,e.randXY,e.randNum);break;case 140:this.handleToggle(e.bool);break;case 141:this.handleSpeedReduceLabel(e.actorNr,e.opacity);break;case 142:this.handleCantUse(e.actorNr,e.bool)}},e.prototype.handlePositionUpdate=function(t,e,o){var n=new cc.Vec2(t.x,t.y);e?e.setPosition(n):this.createPlayerNode(o,this.nickName.string)},e.prototype.handleRequestPosition=function(t){var e=t.requestActorNr,o=this.getPlayerNode(this.myActorNr);o&&this.client.raiseEvent(1,{x:o.x,y:o.y},{targetActors:[e]})},e.prototype.handleGameStart=function(t){t?(cc.find("Canvas/Main Camera").active=!1,this.isStarted=!0,t.getChildByName("PlayerCamera").getChildByName("PlayerUI").active=!0,this.roomCodeInGame.node.active=!1,this.gameStartCnt(t)):console.log("PlayerNode\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.")},e.prototype.handleNicknameReceived=function(t){var e=t.nickname,o=t.actorNr,n=this.getPlayerNode(o);n&&(n.getChildByName("NickName").getComponent(cc.Label).string=e),this.playerNicknames.set(o,e),console.log("Actor "+o+"\uc758 \ub2c9\ub124\uc784: "+e),this.client.raiseEvent(106,{actorNr:this.myActorNr,nickname:this.nickName.string}),this.client.raiseEvent(103,{actorNr:this.myActorNr,anim:"Char1Idle"}),this.client.raiseEvent(114,{actorNr:this.myActorNr})},e.prototype.handleBulletSpawn=function(t){this.spawnBullet(t.position,t.direction,t.actorNr)},e.prototype.handleScaleChange=function(t){var e=t.actorNr,o=t.scaleX,n=this.getPlayerNode(e);n&&(n.getChildByName("PlayerPrefab").scaleX=o)},e.prototype.handleAnimation=function(t){var e=t.actorNr,o=t.anim,n=this.getPlayerNode(e);if(n){var i=n.getChildByName("PlayerPrefab").getComponent(cc.Animation);i.getAnimationState(o).isPlaying||i.play(o)}},e.prototype.handlePlayerDeath=function(t){var e=t.actorNr,o=this.getPlayerNode(e);o&&(o.getChildByName("PlayerPrefab").active=!1)},e.prototype.handlePlayerSpawn=function(t){var e=t.actorNr,o=this.getPlayerNode(e);o&&(o.getChildByName("PlayerPrefab").active=!0)},e.prototype.handleNicknameUpdate=function(t){var e=t.nickname,o=t.actorNr,n=this.getPlayerNode(o);n&&(n.getChildByName("NickName").getComponent(cc.Label).string=e),this.playerNicknames.set(o,e)},e.prototype.handleDisableBoxCollider=function(t){var e=t.actorNr,o=this.getPlayerNode(e);o&&(o.group="Invincible")},e.prototype.handleEnableBoxCollider=function(t){var e=t.actorNr,o=this.getPlayerNode(e);o&&this.scheduleOnce(function(){o.group="Player"},3)},e.prototype.handleGunAngleUpdate=function(t){var e=t.actorNr,o=t.angle,n=this.getPlayerNode(e);n&&(n.getChildByName("GunNode").angle=o)},e.prototype.handlePlayerHide=function(t){var e=t.actorNr,o=this.getPlayerNode(e);o&&(o.active=!1)},e.prototype.handlePlayerShow=function(t){var e=t.actorNr,o=this.getPlayerNode(e);o&&(o.active=!0)},e.prototype.handleKillLog=function(t){var e=t.dieActorNr,o=t.killActorNr,n=this.getPlayerNode(e),i=this.getPlayerNode(o),a=this.getPlayerNode(this.myActorNr);if(a){var r=cc.instantiate(this.killLogPrefab);a.getChildByName("PlayerCamera").getChildByName("KillLogContainer").addChild(r),r.setPosition(cc.v2(0,0)),r.getChildByName("DeathNickName").getComponent(cc.Label).string=n.getChildByName("NickName").getComponent(cc.Label).string,r.getChildByName("DeathNickName").color=n.getChildByName("NickName").color,r.getChildByName("KillNickName").getComponent(cc.Label).string=i.getChildByName("NickName").getComponent(cc.Label).string,r.getChildByName("KillNickName").color=i.getChildByName("NickName").color,this.scheduleOnce(function(){r.destroy()},3)}},e.prototype.handleSpawnRequest=function(t){var e=t.randNum;if(this.getPlayerNode(this.myActorNr)){var o=[0,1,2,3,4,5,6,7,8,9];o.splice(e,1);var n=o[Math.floor(Math.random()*o.length)];this.spawn(n),this.client.raiseEvent(126,{actorNr:this.myActorNr,position:this.getPlayerNode(this.myActorNr).position})}},e.prototype.handleKdaContainerUpdate=function(t){var e=t.actorNr,o=this.getPlayerNode(e),n=this.getPlayerNode(this.myActorNr);if(n){var i=cc.instantiate(this.kdaLabelPrefab);i.setPosition(cc.v2(0,0)),i.name="kda_"+e,n.getChildByName("PlayerCamera").getChildByName("KdaPanel").getChildByName("KdaContainer").addChild(i),o?(i.getChildByName("KdaLabelNickName").color=o.getChildByName("NickName").color,i.getChildByName("KdaLabelNickName").getComponent(cc.Label).string=o.getChildByName("NickName").getComponent(cc.Label).string,i.getChildByName("KdaLabelKill").getComponent(cc.Label).string=o.getComponent(c.default).getKillScore().toString(),i.getChildByName("KdaLabelDeath").getComponent(cc.Label).string=o.getComponent(c.default).getDeathScore().toString()):console.log("kdaPlayerNode\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."),this.removeDuplicateChildren(n.getChildByName("PlayerCamera").getChildByName("KdaPanel").getChildByName("KdaContainer")),console.log(i.name+"\uc774\ub984 \ucc0d\uc5b4\ubcf4\uae30"),this.client.raiseEvent(115,{actorNr:this.myActorNr})}},e.prototype.handleKdaLabelUpdate=function(t){var e=t.actorNr;if(e!==this.myActorNr){var o=this.getPlayerNode(e),n=this.getPlayerNode(this.myActorNr);if(n){var i=cc.instantiate(this.kdaLabelPrefab);i.setPosition(cc.v2(0,0)),i.name="kda_"+e,n.getChildByName("PlayerCamera").getChildByName("KdaPanel").getChildByName("KdaContainer").addChild(i),o?(i.getChildByName("KdaLabelNickName").color=o.getChildByName("NickName").color,i.getChildByName("KdaLabelNickName").getComponent(cc.Label).string=o.getChildByName("NickName").getComponent(cc.Label).string,i.getChildByName("KdaLabelKill").getComponent(cc.Label).string=o.getComponent(c.default).getKillScore().toString(),i.getChildByName("KdaLabelDeath").getComponent(cc.Label).string=o.getComponent(c.default).getDeathScore().toString()):console.log("\uc5c6\uc74c"),this.removeDuplicateChildren(n.getChildByName("PlayerCamera").getChildByName("KdaPanel").getChildByName("KdaContainer"))}}},e.prototype.handleKdaSynchronization=function(){var t=this.getPlayerNode(this.myActorNr).getChildByName("PlayerCamera").getChildByName("KdaPanel").getChildByName("KdaContainer"),e=this.client.myRoomActors();for(var o in e)if(parseInt(o)!==this.myActorNr){var n=this.getPlayerNode(parseInt(o)),i=t.getChildByName("kda_"+parseInt(o));i||((i=cc.instantiate(this.kdaLabelPrefab)).name="kda_"+parseInt(o),t.addChild(i)),i.getChildByName("KdaLabelNickName").color=n.getChildByName("NickName").color,i.getChildByName("KdaLabelNickName").getComponent(cc.Label).string=n.getChildByName("NickName").getComponent(cc.Label).string,i.getChildByName("KdaLabelKill").getComponent(cc.Label).string=n.getComponent(c.default).getKillScore().toString(),i.getChildByName("KdaLabelDeath").getComponent(cc.Label).string=n.getComponent(c.default).getDeathScore().toString()}},e.prototype.handleKdaUpdate=function(t){var e=t.actorNr,o=t.killActorNr,n=this.getPlayerNode(e);n&&n.getComponent(c.default).setDeathScore(1),(n=this.getPlayerNode(o))&&(console.log(n.name+"\uac00 \ud0ac +1"),n.getComponent(c.default).setKillScore(1),n.getComponent(c.default).updateKdaLabelLocal(),n.getComponent(c.default).isKill=!0,this.scheduleOnce(function(){n.getComponent(c.default).isKill=!1},.5),n.getComponent(c.default).shakeCamera(.5,10))},e.prototype.handleDeathAnimation=function(t){var e=t.actorNr,o=t.anim,n=this.getPlayerNode(e);if(n){var i=n.getChildByName("PlayerDummy").getComponent(cc.Animation);i.getAnimationState(o).isPlaying||i.play(o)}},e.prototype.handleActivateDummyNode=function(t){var e=t.actorNr,o=this.getPlayerNode(e);if(o){var n=o.getChildByName("PlayerDummy");n.active=!0,this.scheduleOnce(function(){n.active=!1},.2)}},e.prototype.handleStopDeathAnimation=function(t){var e=t.actorNr,o=t.anim,n=this.getPlayerNode(e);if(n){var i=n.getChildByName("PlayerDummy").getComponent(cc.Animation);i.getAnimationState(o).isPlaying||i.stop(o)}},e.prototype.handleCreateDamageEffect=function(t){var e=t.actorNr,o=this.getPlayerNode(e);o&&o.getComponent(c.default).createOpacityTween(o.getChildByName("DamageNum"),.3)},e.prototype.handleUpdateTimerLabel=function(t){var e=t.currentTime,o=this.getPlayerNode(this.myActorNr);o&&(this.timerLabel=o.getChildByName("PlayerCamera").getChildByName("PlayerUI").getChildByName("Timer").getComponent(cc.Label),this.timerLabel.string=""+e)},e.prototype.handleGameOver=function(){var t=this.getPlayerNode(this.myActorNr);t&&(cc.log("\ud0c0\uc774\uba38\uac00 \uc885\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"),t.getComponent(c.default).gameOver())},e.prototype.handleWeaponDeactivation=function(t){var e=this.getPlayerNode(t);e&&(e.getChildByName("GunNode").getChildByName("weaponR1").active=!1)},e.prototype.handleWeaponActivation=function(t){var e=this.getPlayerNode(t);e&&(e.getChildByName("GunNode").getChildByName("weaponR1").active=!0)},e.prototype.handleRespawnIfPositionOverlap=function(t){var e=this.getPlayerNode(this.myActorNr);if(this.myActorNr!==t&&e){var o=this.getPlayerNode(t);if(this.isSamePosition(e,o)){console.log("\uc704\uce58\uac00 \uacb9\uce69\ub2c8\ub2e4. \uc7ac\uc2a4\ud3f0 \uc2dc\ub3c4.");var n=Math.floor(Math.random()*this.spawnPoints.length),i=this.spawnPoints[n];this.spawn(i),this.client.raiseEvent(126,{actorNr:this.myActorNr,position:this.getPlayerNode(this.myActorNr).position})}}},e.prototype.handleInvincibility=function(t,e){var o=this.getPlayerNode(t);o&&this.createOpacityTween2(o.getChildByName("PlayerPrefab"),e)},e.prototype.handleMuzzleActivation=function(t){var e=this.getPlayerNode(t);e&&(e.getChildByName("GunNode").getChildByName("weaponR1").getChildByName("muzzle").active=!0)},e.prototype.handleMuzzleDeactivation=function(t){var e=this.getPlayerNode(t);e&&(e.getChildByName("GunNode").getChildByName("weaponR1").getChildByName("muzzle").active=!1)},e.prototype.handleShadowActivation=function(t){var e=this.getPlayerNode(t);e&&(e.getChildByName("Shadow").active=!0)},e.prototype.handleShadowToggle=function(t,e){var o=this.getPlayerNode(t);o&&(o.getChildByName("Shadow").active=e)},e.prototype.handleBackToLobby=function(t){this.getPlayerNode(t)&&this.onBackToLobbyBtnClick()},e.prototype.playDieSound=function(t){var e=this.getPlayerNode(t);if(e){var o=e.getChildByName("DieSound").getComponent(h.default);o&&o.playDieSnd()}},e.prototype.playHitSound=function(t){var e=this.getPlayerNode(t);if(e){var o=e.getChildByName("HitSound").getComponent(u.default);o&&o.playHitSnd()}},e.prototype.playShotSound=function(t){var e=this.getPlayerNode(t);if(e){var o=e.getChildByName("ShotSound").getComponent(f.default);o&&o.playShotSnd()}},e.prototype.handleDamageEffect=function(t){var e=this.getPlayerNode(t);if(e){var o=e.getChildByName("NickName").color;this.takeDamageEffect(e.getChildByName("PlayerPrefab"),.1,o)}},e.prototype.scaleWeapon=function(t,e){var o=this.getPlayerNode(t);o&&(o.getChildByName("GunNode").getChildByName("weaponR1").scaleY=e)},e.prototype.playRespawnSound=function(t){var e=this.getPlayerNode(t);if(e){var o=e.getChildByName("RespawnSound").getComponent(y.default);o&&o.playRespawnSnd()}},e.prototype.spawnTrap=function(t,e,o){var n=new cc.Node;switch(t){case 0:switch(n=cc.instantiate(this.trapPrefab1),e){case 0:n.setPosition(cc.v2(-960,o));break;case 1:n.angle=90,n.setPosition(cc.v2(o,-960))}break;case 1:switch(n=cc.instantiate(this.trapPrefab2),e){case 0:n.setPosition(cc.v2(-960,o));break;case 1:n.angle=90,n.setPosition(cc.v2(o,-960))}}cc.find("Canvas/Game").addChild(n)},e.prototype.handleToggle=function(t){var e=this.getPlayerNode(this.myActorNr);t?(e.getChildByName("PlayerCamera").setPosition(cc.v2(0,0)),e.getComponent(d.default).isHomeBtn=!0):e.getComponent(d.default).isHomeBtn=!1},e.prototype.handleSpeedReduceLabel=function(t,e){var o=this.getPlayerNode(t);o&&(o.getChildByName("SpeedReduceLabel").opacity=e)},e.prototype.handleCantUse=function(t,e){var o=this.getPlayerNode(t);o&&(o.getChildByName("GunNode").getChildByName("weaponR1").getChildByName("CantUse").active=e)},e.instance=null,a([N],e.prototype,"maximumPlayer",void 0),a([N(cc.Prefab)],e.prototype,"playerPrefab1",void 0),a([N(cc.Prefab)],e.prototype,"playerPrefab2",void 0),a([N(cc.Prefab)],e.prototype,"bulletPrefab",void 0),a([N(cc.Node)],e.prototype,"joinButton",void 0),a([N(cc.Node)],e.prototype,"createBtn",void 0),a([N(cc.EditBox)],e.prototype,"roomName",void 0),a([N(cc.EditBox)],e.prototype,"nickName",void 0),a([N(cc.Label)],e.prototype,"roomCodeInGame",void 0),a([N(cc.Node)],e.prototype,"startBtn",void 0),a([N(cc.Node)],e.prototype,"backToLobbyBtn",void 0),a([N(cc.Prefab)],e.prototype,"killLogPrefab",void 0),a([N(cc.Prefab)],e.prototype,"kdaLabelPrefab",void 0),a([N(cc.Node)],e.prototype,"spawnPoint",void 0),a([N(cc.Node)],e.prototype,"introTitle",void 0),a([N(cc.EditBox)],e.prototype,"timerEditBox",void 0),a([N],e.prototype,"totalTime",void 0),a([N(cc.Node)],e.prototype,"enterNode",void 0),a([N(cc.Prefab)],e.prototype,"trapPrefab1",void 0),a([N(cc.Prefab)],e.prototype,"trapPrefab2",void 0),a([N(cc.Node)],e.prototype,"errorLogContainer",void 0),a([N(cc.Prefab)],e.prototype,"errorLogPrefab",void 0),o=a([g],e)}(cc.Component);o.default=v,cc._RF.pop()},{"./Player/Bullet":"Bullet","./Player/Player":"Player","./Player/PlayerFire":"PlayerFire","./Player/PlayerMovement":"PlayerMovement","./SoundScript/BeepSound":"BeepSound","./SoundScript/DieSound":"DieSound","./SoundScript/HitSound":"HitSound","./SoundScript/RespawnSound":"RespawnSound","./SoundScript/ShotSound":"ShotSound"}],PlayerDie:[function(t,e,o){"use strict";cc._RF.push(e,"7e76eGx3dVKZIu0trOVsIAh","PlayerDie");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../PhotonManager"),c=cc._decorator,l=c.ccclass,s=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e}return i(e,t),e.prototype.onEnable=function(){var t=this;this.anim.getAnimationState("Char1Die").isPlaying||(console.log("die \uc560\ub2c8\uba54\uc774\uc158 \uc2e4\ud589"),this.anim.play("Char1Die"),this.anim.on("finished",function(){t.node.active=!1}))},e.prototype.onDisable=function(){this.anim.stop("Char1Die"),r.default.instance.client.raiseEvent(120,{actorNr:r.default.instance.MyActNum(),anim:"Char1Die"})},a([s(cc.Animation)],e.prototype,"anim",void 0),a([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../PhotonManager":"PhotonManager"}],PlayerFire:[function(t,e,o){"use strict";cc._RF.push(e,"d1e10KBQNFEmYpxukwesn5z","PlayerFire");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../PhotonManager"),c=t("../SoundScript/PlayerSound"),l=t("../SoundScript/ShotSound"),s=t("./Player"),d=t("./PlayerMovement"),p=cc._decorator,h=p.ccclass,u=p.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.kdaPanel=null,e.muzzle=null,e.maxBullets=30,e.currentBullets=e.maxBullets,e.isReloading=!1,e.bulletLabel=null,e.gunNode=null,e.canFire=!0,e.fireDelay=.25,e.timeSinceLastShot=0,e}return i(e,t),e.prototype.getMaxBullets=function(){return this.maxBullets},e.prototype.setCurrentBullet=function(t){this.currentBullets=t,this.bulletLabel.string=this.currentBullets+" / "+this.maxBullets},e.prototype.onEnable=function(){if(this.node.name==="Player_"+r.default.instance.MyActNum()){var t=cc.find("BigEmptyNode");t.on(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown,this),t.on(cc.Node.EventType.MOUSE_UP,this.onMouseUp,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.bulletLabel.string=this.currentBullets+" / "+this.maxBullets}},e.prototype.onKeyDown=function(t){t.keyCode!==cc.macro.KEY.tab||this.node.getComponent(s.default).isGameOver||(this.kdaPanel.active=!0),t.keyCode===cc.macro.KEY.r&&this.currentBullets<this.maxBullets&&0==this.isReloading&&this.reloadBullets()},e.prototype.onKeyUp=function(t){t.keyCode!==cc.macro.KEY.tab||this.node.getComponent(s.default).isGameOver||(this.kdaPanel.active=!1)},e.prototype.onMouseDown=function(t){var e=this,o=this.node.getComponent(s.default);t.getButton()!==cc.Event.EventMouse.BUTTON_LEFT||!o.canShoot||o.isGameOver||this.isReloading||!this.canFire||this.node.getComponent(d.default).getIsTrappedActive()||(this.currentBullets>0?(this.node.getChildByName("ShotSound").getComponent(l.default).playShotSnd(),r.default.instance.client.raiseEvent(135,{actorNr:r.default.instance.MyActNum()}),this.muzzle.active=!0,this.scheduleOnce(function(){e.muzzle.active=!1},.1),r.default.instance.client.raiseEvent(128,{actorNr:r.default.instance.MyActNum()}),r.default.instance.shootBullet(),this.currentBullets--,console.log("Remaining bullets: "+this.currentBullets),this.bulletLabel.string=this.currentBullets+" / "+this.maxBullets,this.canFire=!1):console.log("No bullets left! Press R to reload."))},e.prototype.onMouseUp=function(t){t.getButton()===cc.Event.EventMouse.BUTTON_LEFT&&(this.muzzle.active=!1,r.default.instance.client.raiseEvent(129,{actorNr:r.default.instance.MyActNum()}))},e.prototype.reloadBullets=function(){var t=this;this.isReloading=!0,this.gunNode.opacity=100,this.bulletLabel.string="Reloading,,",this.node.getChildByName("PlayerCamera").getComponent(c.default).playReloadSnd(),this.scheduleOnce(function(){t.currentBullets=t.maxBullets,t.bulletLabel.string=t.currentBullets+" / "+t.maxBullets,t.isReloading=!1,t.gunNode.opacity=255,console.log("Bullets reloaded!")},1.5)},e.prototype.update=function(t){this.canFire||(this.timeSinceLastShot+=t,this.timeSinceLastShot>=this.fireDelay&&(this.canFire=!0,this.timeSinceLastShot=0))},e.prototype.onDisable=function(){if(this.node.name==="Player_"+r.default.instance.MyActNum()){var t=cc.find("BigEmptyNode");t.off(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown,this),t.off(cc.Node.EventType.MOUSE_UP,this.onMouseUp,this)}},a([u(cc.Node)],e.prototype,"kdaPanel",void 0),a([u(cc.Node)],e.prototype,"muzzle",void 0),a([u(cc.Label)],e.prototype,"bulletLabel",void 0),a([u(cc.Node)],e.prototype,"gunNode",void 0),a([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../PhotonManager":"PhotonManager","../SoundScript/PlayerSound":"PlayerSound","../SoundScript/ShotSound":"ShotSound","./Player":"Player","./PlayerMovement":"PlayerMovement"}],PlayerMovement:[function(t,e,o){"use strict";cc._RF.push(e,"665f48rzfhLapulPlFE+UmA","PlayerMovement");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../PhotonManager"),c=t("../SoundScript/NoStaminaSound"),l=t("../SoundScript/StepSound"),s=t("./Player"),d=cc._decorator,p=d.ccclass,h=d.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.photonManager=null,e.isKeyLeftPressed=!1,e.isKeyRightPressed=!1,e.isKeyUpPressed=!1,e.isKeyDownPressed=!1,e.isKeySpacePressed=!1,e.moveSpeed=200,e.up=!1,e.down=!1,e.left=!1,e.right=!1,e.isTrapped=!1,e.nickNameNode=null,e.anim=null,e.gunNode=null,e.aimNode=null,e.homeBtn=null,e.gunBtn=null,e.weaponNode=null,e.isHomeBtn=!0,e.staminaBar=null,e.maxStamina=100,e.currentStamina=e.maxStamina,e.viewToggle=null,e.moveDir=null,e.isCharging=!1,e.timer=0,e}return i(e,t),e.prototype.setCurrentStamina=function(t){this.currentStamina=t,this.updateStaminaBar()},e.prototype.onEnable=function(){this.node.name==="Player_"+r.default.instance.MyActNum()?cc.find("BigEmptyNode").on(cc.Node.EventType.MOUSE_MOVE,this.onMouseMove,this):this.aimNode.active=!1},e.prototype.onDisable=function(){cc.find("BigEmptyNode").off(cc.Node.EventType.MOUSE_MOVE,this.onMouseMove,this)},e.prototype.onMouseMove=function(t){if(this.node.name==="Player_"+r.default.instance.MyActNum()){var e=t.getLocation(),o=this.node.getChildByName("PlayerCamera").getComponent(cc.Camera).getScreenToWorldPoint(e),n=this.aimNode.parent.convertToNodeSpaceAR(o);this.aimNode.setPosition(n),this.lookAtMousePointer(this.gunNode,t)}},e.prototype.onLoad=function(){this.photonManager=cc.find("PhotonManager").getComponent(r.default);var t=this.node.getChildByName("PlayerCamera");cc.director.getPhysicsManager().enabled=!0,this.photonManager?(cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)):console.error("PhotonManager component is not assigned."),this.node.name==="Player_"+r.default.instance.MyActNum()?(console.log(this.node.name+"\uc758 \uce74\uba54\ub77c \ud65c\uc131\ud654"),t.active=!0,this.aimNode.active=!0):(console.log("\ub0a8\uc758 \uce74\uba54\ub77c \ube44\ud65c\uc131\ud654"),t.active=!1,this.aimNode.active=!1),this.viewToggle=cc.find("Canvas/EnterGame/Setting/ModeToggle").getComponent(cc.Toggle),this.viewToggle.node.on("toggle",this.onToggleChanged,this),this.homeBtn.node.on("click",this.homeBtnClick,this),this.gunBtn.node.on("click",this.gunBtnClick,this),this.viewToggle.isChecked?this.homeBtnClick():this.gunBtnClick()},e.prototype.onToggleChanged=function(t){t.isChecked?this.homeBtnClick():this.gunBtnClick()},e.prototype.homeBtnClick=function(){this.node.getChildByName("PlayerCamera").setPosition(cc.v2(0,0)),this.isHomeBtn=!0},e.prototype.gunBtnClick=function(){this.isHomeBtn=!1},e.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.a:this.isKeyLeftPressed=!0;break;case cc.macro.KEY.d:this.isKeyRightPressed=!0;break;case cc.macro.KEY.w:this.isKeyUpPressed=!0;break;case cc.macro.KEY.s:this.isKeyDownPressed=!0;break;case cc.macro.KEY.space:this.isKeySpacePressed=!0}},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.a:this.isKeyLeftPressed=!1;break;case cc.macro.KEY.d:this.isKeyRightPressed=!1;break;case cc.macro.KEY.w:this.isKeyUpPressed=!1;break;case cc.macro.KEY.s:this.isKeyDownPressed=!1;break;case cc.macro.KEY.space:this.isKeySpacePressed=!1}},e.prototype.update=function(t){if(this.node.getComponent(s.default).canMove&&(this.moveDir=cc.v2(0,0),this.updateStaminaBar(),this.isKeySpacePressed&&!this.isCharging?(this.currentStamina>0&&r.default.instance.isGameStart()?this.currentStamina-=50*t:this.currentStamina<=0&&(this.node.getChildByName("NoStaminaSound").getComponent(cc.AudioSource).isPlaying||this.node.getChildByName("NoStaminaSound").getComponent(c.default).playNoStaminaSnd(),this.isCharging=!0,this.staminaBar.node.getChildByName("bar").color=cc.Color.GRAY,this.isKeySpacePressed=!1),this.node.getComponent(s.default).currentState=s.PlayerState.MoveOnly,this.isTrapped?this.moveSpeed=200:this.moveSpeed=600,this.weaponNode.active=!1,r.default.instance.client.raiseEvent(124,{actorNr:r.default.instance.MyActNum()})):this.isKeySpacePressed&&!this.isCharging||(r.default.instance.isGameStart()?this.node.getComponent(s.default).currentState=s.PlayerState.MoveAndShoot:this.node.getComponent(s.default).currentState=s.PlayerState.MoveOnly,this.currentStamina<=this.maxStamina&&(this.currentStamina+=30*t),this.currentStamina>=this.maxStamina&&(this.node.getChildByName("NoStaminaSound").getComponent(cc.AudioSource).isPlaying||1!=this.isCharging||this.node.getChildByName("NoStaminaSound").getComponent(c.default).playYesStaminaSnd(),this.staminaBar.node.getChildByName("bar").color=cc.Color.YELLOW,this.isCharging=!1),this.isTrapped?this.moveSpeed=100:this.moveSpeed=300,this.weaponNode.active=!0,r.default.instance.client.raiseEvent(125,{actorNr:r.default.instance.MyActNum()})),this.isKeyLeftPressed&&(this.node.position.x<-945||this.left||(this.moveDir.x-=1,this.node.name==="Player_"+r.default.instance.MyActNum()&&(this.node.getChildByName("PlayerPrefab").scaleX=-1,r.default.instance.updatePlayerScaleX(this.node.getChildByName("PlayerPrefab").scaleX)))),this.isKeyRightPressed&&(this.node.position.x>945||this.right||(this.moveDir.x+=1,this.node.name==="Player_"+r.default.instance.MyActNum()&&(this.node.getChildByName("PlayerPrefab").scaleX=1,r.default.instance.updatePlayerScaleX(this.node.getChildByName("PlayerPrefab").scaleX)))),this.isKeyUpPressed&&(this.node.position.y>940||this.up||(this.moveDir.y+=1)),this.isKeyDownPressed&&(this.node.position.y<-940||this.down||(this.moveDir.y-=1)),this.node.name==="Player_"+r.default.instance.MyActNum()&&(this.isKeySpacePressed&&this.currentStamina>0&&0==this.isCharging?(this.node.getChildByName("StepSound").getComponent(cc.AudioSource).clip!==this.node.getChildByName("StepSound").getComponent(l.default).audioClips[0]&&this.node.getChildByName("StepSound").getComponent(cc.AudioSource).isPlaying||(this.node.getChildByName("StepSound").getComponent(cc.AudioSource).volume=.25,this.node.getChildByName("StepSound").getComponent(l.default).playDriftSnd()),this.anim.getAnimationState("Char1Roll").isPlaying||(this.anim.play("Char1Roll"),r.default.instance.client.raiseEvent(103,{actorNr:r.default.instance.MyActNum(),anim:"Char1Roll"}))):this.moveDir.equals(cc.Vec2.ZERO)?this.moveDir.equals(cc.Vec2.ZERO)&&(this.anim.getAnimationState("Char1Idle").isPlaying||(this.anim.play("Char1Idle"),r.default.instance.client.raiseEvent(103,{actorNr:r.default.instance.MyActNum(),anim:"Char1Idle"}))):(this.node.getChildByName("StepSound").getComponent(cc.AudioSource).clip!==this.node.getChildByName("StepSound").getComponent(l.default).audioClips[1]&&this.node.getChildByName("StepSound").getComponent(cc.AudioSource).isPlaying||(this.node.getChildByName("StepSound").getComponent(cc.AudioSource).volume=1,this.node.getChildByName("StepSound").getComponent(l.default).playStepSnd()),this.anim.getAnimationState("Char1Walk").isPlaying||(this.anim.play("Char1Walk"),r.default.instance.client.raiseEvent(103,{actorNr:r.default.instance.MyActNum(),anim:"Char1Walk"}))),!this.moveDir.equals(cc.Vec2.ZERO)))){var e=this.moveDir.normalize().mul(this.moveSpeed*t),o=this.photonManager.getPlayerNode(r.default.instance.MyActNum());if(o.name===this.node.name){var n=o.position.add(cc.v3(e.x,e.y,0));o.setPosition(n),this.photonManager.movePlayer(cc.v2(n.x,n.y))}}},e.prototype.lateUpdate=function(t){var e=this.aimNode.convertToWorldSpaceAR(cc.v2(0,0)),o=this.node.convertToWorldSpaceAR(cc.v2(0,0));Math.abs(e.x-o.x)>5&&(e.x-o.x>0?this.weaponNode.scaleY=1:this.weaponNode.scaleY=-1,r.default.instance.client.raiseEvent(137,{actorNr:r.default.instance.MyActNum(),scale:this.weaponNode.scaleY})),this.isHomeBtn||(this.node.getComponent(s.default).isKill||this.node.getComponent(s.default).isDie?(this.timer+=t,this.timer>.5&&(this.placeCameraBetweenNodes(),this.timer=0)):this.placeCameraBetweenNodes())},e.prototype.getMouseWorldPosition=function(t){var e=cc.v2(t.getLocationX(),t.getLocationY());return this.node.parent.convertToNodeSpaceAR(e)},e.prototype.lookAtMousePointer=function(t,e){var o=this.getMouseWorldPosition(e),n=t.getPosition(),i=o.sub(n),a=Math.atan2(i.y,i.x),c=cc.misc.radiansToDegrees(a);t.angle=c,r.default.instance.client.raiseEvent(109,{actorNr:r.default.instance.MyActNum(),angle:c})},e.prototype.placeCameraBetweenNodes=function(){var t=this.node,e=this.aimNode;if(t&&e){var o=t.convertToWorldSpaceAR(cc.v2(0,0)),n=e.convertToWorldSpaceAR(cc.v2(0,0)),i=o.add(n).mul(.5),a=this.node.getChildByName("PlayerCamera"),r=t.convertToNodeSpaceAR(i);a.setPosition(r)}},e.prototype.upObstacle=function(t){this.up=t},e.prototype.downObstacle=function(t){this.down=t},e.prototype.leftObstacle=function(t){this.left=t},e.prototype.rightObstacle=function(t){this.right=t},e.prototype.isTrappedActive=function(t){this.isTrapped=t},e.prototype.getIsTrappedActive=function(){return this.isTrapped},e.prototype.updateStaminaBar=function(){this.staminaBar.progress=this.currentStamina/this.maxStamina},a([h(cc.Node)],e.prototype,"nickNameNode",void 0),a([h(cc.Animation)],e.prototype,"anim",void 0),a([h(cc.Node)],e.prototype,"gunNode",void 0),a([h(cc.Node)],e.prototype,"aimNode",void 0),a([h(cc.Button)],e.prototype,"homeBtn",void 0),a([h(cc.Button)],e.prototype,"gunBtn",void 0),a([h(cc.Node)],e.prototype,"weaponNode",void 0),a([h(cc.ProgressBar)],e.prototype,"staminaBar",void 0),a([p],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../PhotonManager":"PhotonManager","../SoundScript/NoStaminaSound":"NoStaminaSound","../SoundScript/StepSound":"StepSound","./Player":"Player"}],PlayerSound:[function(t,e,o){"use strict";cc._RF.push(e,"06c78KWvi5BLYZLJDtZGnwC","PlayerSound");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioClips=[],e.audioSource=null,e}return i(e,t),e.prototype.onLoad=function(){this.audioSource=this.getComponent(cc.AudioSource),this.audioSource||console.error("AudioSource component not found!")},e.prototype.playDieSnd=function(){this.audioSource.clip=this.audioClips[0],this.audioSource.play()},e.prototype.playShotSnd=function(){this.audioSource.clip=this.audioClips[1],this.audioSource.play()},e.prototype.playGameStartSnd=function(){this.audioSource.clip=this.audioClips[2],this.audioSource.play()},e.prototype.playReloadSnd=function(){this.audioSource.clip=this.audioClips[3],this.audioSource.play()},a([l([cc.AudioClip])],e.prototype,"audioClips",void 0),a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"e8f625iucNKKoVMApx/jOpP","Player");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerState=void 0;var r,c=t("../PhotonManager"),l=t("../SoundScript/DieSound"),s=t("../SoundScript/HitSound"),d=t("../SoundScript/RespawnSound"),p=t("../SoundScript/SlowSound"),h=t("./Bullet"),u=t("./PlayerMovement"),y=cc._decorator,f=y.ccclass,m=y.property;(function(t){t[t.Idle=0]="Idle",t[t.MoveOnly=1]="MoveOnly",t[t.MoveAndShoot=2]="MoveAndShoot"})(r=o.PlayerState||(o.PlayerState={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentState=r.Idle,e.healthBar=null,e.killLogPrefab=null,e.kdaLabelPrefab=null,e.maxHealth=100,e.currentHealth=100,e.canMove=!0,e.canShoot=!0,e.killScore=0,e.deathScore=0,e.kdaLabel=null,e.animNode=null,e.gameOverImg=null,e.isGameOver=!1,e.kdaPanel=null,e.gameOverBg=null,e.onDamageImg=null,e.damageNum=null,e.camera=null,e.isDie=!1,e.isKill=!1,e.originalColor=null,e.speedReduceLabel=null,e.cantUse=null,e}var o;return i(e,t),o=e,e.prototype.setCurrentHealth=function(t){this.currentHealth=t,this.updateHealthBar()},e.prototype.setKillScore=function(t){this.killScore+=t},e.prototype.getKillScore=function(){return this.killScore},e.prototype.setDeathScore=function(t){this.deathScore+=t},e.prototype.getDeathScore=function(){return this.deathScore},e.prototype.resetKillDeath=function(){this.killScore=0,this.deathScore=0},e.prototype.onLoad=function(){var t,e=this;cc.director.getCollisionManager().enabled=!0,this.node.name==="Player_"+c.default.instance.MyActNum()||(this.healthBar.node.active=!1),this.updateHealthBar(),this.initKdaLabel(),cc.game.on(cc.game.EVENT_HIDE,function(){e.node.active=!1,c.default.instance.client.raiseEvent(110,{actorNr:c.default.instance.MyActNum()}),t=setTimeout(function(){e.exitPlayer()},1e4)}),cc.game.on(cc.game.EVENT_SHOW,function(){e.node.active=!0,c.default.instance.client.raiseEvent(111,{actorNr:c.default.instance.MyActNum()}),t&&(clearTimeout(t),t=null)}),this.originalColor=this.node.getChildByName("PlayerPrefab").color,console.log(this.originalColor)},e.prototype.exitPlayer=function(){location.reload()},e.prototype.initKdaLabel=function(){this.kdaLabel=cc.instantiate(this.kdaLabelPrefab),this.kdaLabel.setPosition(cc.v2(0,0)),this.kdaLabel.name="kda_"+c.default.instance.MyActNum(),this.node.getChildByName("PlayerCamera").getChildByName("KdaPanel").getChildByName("KdaContainer").addChild(this.kdaLabel),this.kdaLabel.getChildByName("KdaLabelNickName").color=this.node.getChildByName("NickName").color,this.kdaLabel.getChildByName("KdaLabelNickName").getComponent(cc.Label).string=this.node.getChildByName("NickName").getComponent(cc.Label).string,this.kdaLabel.getChildByName("KdaLabelKill").getComponent(cc.Label).string=this.killScore.toString(),this.kdaLabel.getChildByName("KdaLabelDeath").getComponent(cc.Label).string=this.deathScore.toString()},e.prototype.updateKdaLabel=function(){this.kdaLabel.getChildByName("KdaLabelNickName").color=this.node.getChildByName("NickName").color,this.kdaLabel.getChildByName("KdaLabelNickName").getComponent(cc.Label).string=this.node.getChildByName("NickName").getComponent(cc.Label).string,this.kdaLabel.getChildByName("KdaLabelKill").getComponent(cc.Label).string=this.getKillScore().toString(),this.kdaLabel.getChildByName("KdaLabelDeath").getComponent(cc.Label).string=this.getDeathScore().toString(),c.default.instance.client.raiseEvent(114,{actorNr:c.default.instance.MyActNum()})},e.prototype.updateKdaLabelLocal=function(){this.kdaLabel.getChildByName("KdaLabelNickName").color=this.node.getChildByName("NickName").color,this.kdaLabel.getChildByName("KdaLabelNickName").getComponent(cc.Label).string=this.node.getChildByName("NickName").getComponent(cc.Label).string,this.kdaLabel.getChildByName("KdaLabelKill").getComponent(cc.Label).string=this.getKillScore().toString(),this.kdaLabel.getChildByName("KdaLabelDeath").getComponent(cc.Label).string=this.getDeathScore().toString()},e.prototype.takeDamage=function(t,e){if(this.node.name==="Player_"+c.default.instance.MyActNum()){this.shakeCamera(.2,7),this.node.getChildByName("HitSound").getComponent(s.default).playHitSnd(),c.default.instance.client.raiseEvent(134,{actorNr:c.default.instance.MyActNum()}),this.takeDamageEffect(this.node.getChildByName("PlayerPrefab"),.1),c.default.instance.client.raiseEvent(136,{actorNr:c.default.instance.MyActNum()}),this.createOpacityTween(this.onDamageImg,.3);var o=this.damageNum;o.getComponent(cc.Label).string=e.toString(),this.createOpacityTween(o,.3),c.default.instance.client.raiseEvent(121,{actorNr:c.default.instance.MyActNum()}),this.currentHealth-=e,this.currentHealth<0&&(this.currentHealth=0),this.updateHealthBar(),0==this.currentHealth&&this.onDeath(t)}},e.prototype.heal=function(t){this.currentHealth+=t,this.currentHealth>this.maxHealth&&(this.currentHealth=this.maxHealth),this.updateHealthBar()},e.prototype.updateHealthBar=function(){this.healthBar&&(this.healthBar.progress=this.currentHealth/this.maxHealth)},e.prototype.onDeath=function(t){var e=this;this.node.getChildByName("DieSound").getComponent(l.default).playDieSnd(),c.default.instance.client.raiseEvent(133,{actorNr:c.default.instance.MyActNum()}),this.isDie=!0,this.scheduleOnce(function(){e.isDie=!1},.5),this.shakeCamera(.5,10),this.currentState=r.Idle,this.animNode.active=!0,c.default.instance.client.raiseEvent(119,{actorNr:c.default.instance.MyActNum()});var n=c.default.instance.getPlayerNode(t);n.getComponent(o).setKillScore(1),n.getComponent(o).updateKdaLabel(),this.deathScore++,c.default.instance.client.raiseEvent(117,{actorNr:c.default.instance.MyActNum(),killActorNr:t}),this.updateKdaLabel(),this.node.getChildByName("PlayerPrefab").active=!1,this.node.getChildByName("Shadow").active=!1,this.node.group="Invincible",c.default.instance.client.raiseEvent(104,{actorNr:c.default.instance.MyActNum()}),c.default.instance.client.raiseEvent(131,{actorNr:c.default.instance.MyActNum()}),c.default.instance.client.raiseEvent(107,{actorNr:c.default.instance.MyActNum()});var i=cc.instantiate(this.killLogPrefab);this.node.getChildByName("PlayerCamera").getChildByName("KillLogContainer").addChild(i),i.setPosition(cc.v2(0,0));var a=c.default.instance.getPlayerNode(t);i.getChildByName("DeathNickName").getComponent(cc.Label).string=this.node.getChildByName("NickName").getComponent(cc.Label).string,i.getChildByName("DeathNickName").color=this.node.getChildByName("NickName").color,i.getChildByName("KillNickName").getComponent(cc.Label).string=a.getChildByName("NickName").getComponent(cc.Label).string,i.getChildByName("KillNickName").color=a.getChildByName("NickName").color,this.scheduleOnce(function(){i.destroy()},3),c.default.instance.client.raiseEvent(112,{dieActorNr:c.default.instance.MyActNum(),killActorNr:t}),console.log("Player is dead"),this.scheduleOnce(function(){e.respawn()},3)},e.prototype.respawn=function(){var t=this;this.currentState==r.MoveOnly?(this.node.setPosition(cc.v2(0,0)),c.default.instance.movePlayer(cc.v2(0,0)),this.currentHealth=this.maxHealth,this.updateHealthBar(),this.node.getChildByName("PlayerPrefab").active=!0,this.node.getChildByName("Shadow").active=!0,this.createOpacityTween2(this.node.getChildByName("PlayerPrefab"),.42),c.default.instance.client.raiseEvent(127,{actorNr:c.default.instance.MyActNum(),duration:.42}),this.scheduleOnce(function(){},3),c.default.instance.client.raiseEvent(105,{actorNr:c.default.instance.MyActNum()}),c.default.instance.client.raiseEvent(108,{actorNr:c.default.instance.MyActNum()}),c.default.instance.client.raiseEvent(130,{actorNr:c.default.instance.MyActNum()})):(this.currentState=r.MoveAndShoot,this.node.getChildByName("RespawnSound").getComponent(d.default).playRespawnSnd(),c.default.instance.client.raiseEvent(138,{actorNr:c.default.instance.MyActNum()}),this.currentHealth=this.maxHealth,this.updateHealthBar(),this.node.getChildByName("PlayerPrefab").active=!0,this.node.getChildByName("Shadow").active=!0,this.createOpacityTween2(this.node.getChildByName("PlayerPrefab"),.42),c.default.instance.client.raiseEvent(127,{actorNr:c.default.instance.MyActNum(),duration:.42}),this.scheduleOnce(function(){t.node.group="Player",console.log("\ud604\uc7ac \uadf8\ub8f9 : "+t.node.group)},3),c.default.instance.spawn(Math.floor(10*Math.random())),c.default.instance.client.raiseEvent(105,{actorNr:c.default.instance.MyActNum()}),c.default.instance.client.raiseEvent(108,{actorNr:c.default.instance.MyActNum()}),c.default.instance.client.raiseEvent(130,{actorNr:c.default.instance.MyActNum()}))},e.prototype.onCollisionEnter=function(t){if("BulletPrefab"===t.node.name){var e=t.node.getComponent(h.default);if("Player_"+e.getOwner()===this.node.name)return void console.log("\uc790\uc2e0\uc758 \ucd1d\uc54c\uc5d0 \ub9de\uc558\ub2e4.");console.log(e.getOwner()+"\uc758 \ucd1d\uc54c\uc5d0 \ub9de\uc558\ub2e4."),this.takeDamage(e.getOwner(),e.damage),e.node.active=!1}"Wall"===t.node.group&&("up"===t.node.name?this.node.getComponent(u.default).downObstacle(!0):"down"===t.node.name?this.node.getComponent(u.default).upObstacle(!0):"left"===t.node.name?this.node.getComponent(u.default).rightObstacle(!0):"right"===t.node.name?this.node.getComponent(u.default).leftObstacle(!0):"up_left"===t.node.name?(this.node.getComponent(u.default).downObstacle(!0),this.node.getComponent(u.default).rightObstacle(!0)):"down_right"===t.node.name?(this.node.getComponent(u.default).upObstacle(!0),this.node.getComponent(u.default).leftObstacle(!0)):"left_up"===t.node.name?(this.node.getComponent(u.default).upObstacle(!0),this.node.getComponent(u.default).rightObstacle(!0)):"right_down"===t.node.name&&(this.node.getComponent(u.default).downObstacle(!0),this.node.getComponent(u.default).leftObstacle(!0))),"SlowAttack"===t.node.group&&this.node.name==="Player_"+c.default.instance.MyActNum()&&(this.node.getComponent(u.default).isTrappedActive(!0),this.node.getChildByName("SlowSound").getComponent(p.default).playSlowSnd(),this.speedReduceLabel.opacity=255,this.cantUse.active=!0,c.default.instance.client.raiseEvent(141,{actorNr:c.default.instance.MyActNum(),opacity:255}),c.default.instance.client.raiseEvent(142,{actorNr:c.default.instance.MyActNum(),bool:!0}))},e.prototype.onCollisionExit=function(t){var e=this;"Wall"===t.node.group&&("up"===t.node.name?this.node.getComponent(u.default).downObstacle(!1):"down"===t.node.name?this.node.getComponent(u.default).upObstacle(!1):"left"===t.node.name?this.node.getComponent(u.default).rightObstacle(!1):"right"===t.node.name?this.node.getComponent(u.default).leftObstacle(!1):"up_left"===t.node.name?(this.node.getComponent(u.default).downObstacle(!1),this.node.getComponent(u.default).rightObstacle(!1)):"down_right"===t.node.name?(this.node.getComponent(u.default).upObstacle(!1),this.node.getComponent(u.default).leftObstacle(!1)):"left_up"===t.node.name?(this.node.getComponent(u.default).upObstacle(!1),this.node.getComponent(u.default).rightObstacle(!1)):"right_down"===t.node.name&&(this.node.getComponent(u.default).downObstacle(!1),this.node.getComponent(u.default).leftObstacle(!1))),"SlowAttack"===t.node.group&&this.node.name==="Player_"+c.default.instance.MyActNum()&&this.scheduleOnce(function(){e.node.getComponent(u.default).isTrappedActive(!1),e.speedReduceLabel.opacity=0,e.cantUse.active=!1,c.default.instance.client.raiseEvent(141,{actorNr:c.default.instance.MyActNum(),opacity:0}),c.default.instance.client.raiseEvent(142,{actorNr:c.default.instance.MyActNum(),bool:!1})},2)},e.prototype.update=function(){switch(this.currentState){case r.Idle:this.disableMovement(),this.disableShooting();break;case r.MoveOnly:this.enableMovement(),this.disableShooting();break;case r.MoveAndShoot:this.enableMovement(),this.enableShooting()}},e.prototype.enableMovement=function(){this.canMove=!0},e.prototype.disableMovement=function(){this.canMove=!1},e.prototype.enableShooting=function(){this.canShoot=!0},e.prototype.disableShooting=function(){this.canShoot=!1},e.prototype.changeState=function(t){this.currentState=t},e.prototype.gameOver=function(){this.currentState=r.Idle,this.kdaPanel.active=!0,this.smallToBigTween(this.kdaPanel),this.isGameOver=!0,this.gameOverBg.active=!0,this.smallToBigTween(this.gameOverBg),this.gameOverImg.active=!0,this.smallToBigTween(this.gameOverImg),this.scheduleOnce(function(){cc.director.pause()},.5)},e.prototype.createOpacityTween=function(t,e){t.opacity=0,cc.tween(t).to(e,{opacity:255}).to(e,{opacity:0}).start()},e.prototype.smallToBigTween=function(t){t.setScale(.1,.1,.1),cc.tween(t).to(.5,{scaleX:1,scaleY:1,scaleZ:1}).start()},e.prototype.createOpacityTween2=function(t,e){t.opacity=0,cc.tween(t).to(e,{opacity:255}).to(e,{opacity:100}).to(e,{opacity:255}).to(e,{opacity:100}).to(e,{opacity:255}).to(e,{opacity:100}).to(e,{opacity:255}).start()},e.prototype.shakeCamera=function(t,e){var o=this,n=this.camera.node.position,i=0,a=setInterval(function(){i+=.02;var r=(Math.random()-.5)*e,c=(Math.random()-.5)*e;o.camera.node.setPosition(n.x+r,n.y+c),i>=t&&(clearInterval(a),o.camera.node.setPosition(n))},20)},e.prototype.takeDamageEffect=function(t,e){console.log(this.originalColor),cc.tween(t).to(e,{color:new cc.Color(70,70,70)}).to(e,{color:this.originalColor}).start()},a([m(cc.ProgressBar)],e.prototype,"healthBar",void 0),a([m(cc.Prefab)],e.prototype,"killLogPrefab",void 0),a([m(cc.Prefab)],e.prototype,"kdaLabelPrefab",void 0),a([m(cc.Node)],e.prototype,"animNode",void 0),a([m(cc.Node)],e.prototype,"gameOverImg",void 0),a([m(cc.Node)],e.prototype,"kdaPanel",void 0),a([m(cc.Node)],e.prototype,"gameOverBg",void 0),a([m(cc.Node)],e.prototype,"onDamageImg",void 0),a([m(cc.Node)],e.prototype,"damageNum",void 0),a([m(cc.Camera)],e.prototype,"camera",void 0),a([m(cc.Node)],e.prototype,"speedReduceLabel",void 0),a([m(cc.Node)],e.prototype,"cantUse",void 0),o=a([f],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../PhotonManager":"PhotonManager","../SoundScript/DieSound":"DieSound","../SoundScript/HitSound":"HitSound","../SoundScript/RespawnSound":"RespawnSound","../SoundScript/SlowSound":"SlowSound","./Bullet":"Bullet","./PlayerMovement":"PlayerMovement"}],RespawnSound:[function(t,e,o){"use strict";cc._RF.push(e,"156d7atOQVDcKscLOY2ZWqv","RespawnSound");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioClips=[],e.audioSource=null,e}return i(e,t),e.prototype.onLoad=function(){this.audioSource=this.getComponent(cc.AudioSource)},e.prototype.playRespawnSnd=function(){this.audioSource.clip=this.audioClips[0],this.audioSource.play()},a([l([cc.AudioClip])],e.prototype,"audioClips",void 0),a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],ShotSound:[function(t,e,o){"use strict";cc._RF.push(e,"3265clkB4RN15UEWgMVoPLe","ShotSound");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioClips=[],e.audioSource=null,e}return i(e,t),e.prototype.onLoad=function(){this.audioSource=this.getComponent(cc.AudioSource)},e.prototype.playShotSnd=function(){this.audioSource.clip=this.audioClips[0],this.audioSource.play()},a([l([cc.AudioClip])],e.prototype,"audioClips",void 0),a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],SlowSound:[function(t,e,o){"use strict";cc._RF.push(e,"1dc98fRnDpPJoDswCisheVE","SlowSound");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioClips=[],e.audioSource=null,e}return i(e,t),e.prototype.onLoad=function(){this.audioSource=this.getComponent(cc.AudioSource)},e.prototype.playSlowSnd=function(){this.audioSource.clip=this.audioClips[0],this.audioSource.play()},a([l([cc.AudioClip])],e.prototype,"audioClips",void 0),a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],StepSound:[function(t,e,o){"use strict";cc._RF.push(e,"f069eZ1KTpDKYUrmHls4ecE","StepSound");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioClips=[],e.audioSource=null,e}return i(e,t),e.prototype.onLoad=function(){this.audioSource=this.getComponent(cc.AudioSource)},e.prototype.playStepSnd=function(){this.audioSource.clip=this.audioClips[0],this.audioSource.play()},e.prototype.playDriftSnd=function(){this.audioSource.clip=this.audioClips[1],this.audioSource.play()},a([l([cc.AudioClip])],e.prototype,"audioClips",void 0),a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],TrapSound:[function(t,e,o){"use strict";cc._RF.push(e,"af199dfQFZIKbWc4ZblLaUc","TrapSound");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioClips=[],e.audioSource=null,e}return i(e,t),e.prototype.onLoad=function(){this.audioSource=this.getComponent(cc.AudioSource)},e.prototype.playTrapSnd=function(){this.audioSource.clip=this.audioClips[0],this.audioSource.volume=.4,this.audioSource.play()},e.prototype.playSlowAttackSnd=function(){this.audioSource.clip=this.audioClips[1],this.audioSource.volume=.2,this.audioSource.play()},a([l([cc.AudioClip])],e.prototype,"audioClips",void 0),a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],URLParameterControl:[function(t,e,o){"use strict";cc._RF.push(e,"7970877UzNMjLhKDzl+dciV","URLParameterControl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,l=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.createBtn=null,e.setting=null,e}return i(e,t),e.prototype.onLoad=function(){var t=new URLSearchParams(window.location.search);console.log("Full URL: ",window.location.href),console.log("Search Params: ",window.location.search),console.log("Params object size: ",t.size),console.log("User param value: ",t.get("user"));var e=t.get("user");"teacher"===e?(this.createBtn.active=!0,this.setting.active=!0):null===e&&(this.createBtn.active=!1,this.setting.active=!1)},a([l(cc.Node)],e.prototype,"createBtn",void 0),a([l(cc.Node)],e.prototype,"setting",void 0),a([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}]},{},["URLParameterControl","GameEvent","ErrorLogScript","IntroPlayer","IntroUi","ObstacleCollider","PhotonManager","Bullet","Player","PlayerDie","PlayerFire","PlayerMovement","BeepSound","BtnSound","DieSound","HitSound","IntroSound","NoStaminaSound","OnLoadSound","PlayerSound","RespawnSound","ShotSound","SlowSound","StepSound","TrapSound"]);